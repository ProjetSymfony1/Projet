{% extends 'base.html.twig' %}

{% block title %}{{ "Messages" |trans}}{% endblock %}

{% block body %}

<div class="shadow-lg p-3 mb-5 bg-white rounded">

    <div class="card text-center">
        <div class="card-header">
            {{ "Your messages" |trans}}
        </div>
        <div class="card-body">
            <h5 class="card-title"> {{ "Welcome back admin" |trans}}  {{ app.user.idUser }} !</h5>
            <p class="card-text">{{ "Look at all those questions, we have work to do !" |trans}} </p>
            <table class="table">
                <thead>
                <tr>
                    <th scope="col">{{ "User" |trans}}</th>
                    <th scope="col">{{ "Object" |trans}}</th>
                    <th scope="col">{{ "Message" |trans}}</th>
                    <th scope="col">{{ "Status" |trans}}</th>
                    <th scope="col"></th>
                </tr>
                </thead>
                <tbody>
                {% if messages != null %}
                    {% for i in 0..messages|length-1 %}
                        <td><a href="{{ path('clientData') }}?idUser={{ username[i] }}">{{ username[i]}}</a></td>
                        <td>{{ messages[i].object }}</td>
                        <td>{{ messages[i].message }}</td>
                        <td>{{ messages[i].status }}</td>

                        {% if messages[i].status == 'Being processed'%}
                            <td>
                                <a href="{{ path('checkMessage') }}?idMsg={{ messages[i].id }}" class="btn btn-addCart"> <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" fill="currentColor" class="bi bi-check" viewBox="0 0 16 16">
                            <path d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z"/>
                            </svg> </a> </td>
                        {% endif %}

                </tbody>
                    {% endfor %}
                {% endif     %}
                </table>
        <div class="card-footer text-muted">
            GustoHelpService
        </div>
        </div>
    </div>
</div>

{% endblock %}